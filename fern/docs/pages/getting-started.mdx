## Requirements

 - <Markdown src="../snippets/api-key.mdx" />
 - A [public/private key pair](/authentication#public-key)
 - To create an instance, you must provide values for `gpu_type`, `operating_system_label`, and `ssh_key_name`. 

## Authentication

Whenever you make a call to the FluidStack API, include your API key in the request headers.

The example below uses cURL to call the [`GET /instances`](/api-reference/instances/list) endpoint. The second line demonstrates how to include your API key in the headers:

<EndpointRequestSnippet endpoint="GET /instances" />

## Create an SSH key

When creating an instance, you must provide an SSH key. The SSH key is used for command-line access to the instance, once the instance is running. 

Existing SSH keys are listed in your [FluidStack Dashboard](https://dashboard.fluidstack.io/dashboard/ssh-keys). If there are none listed, or you want to use a new SSH key, you can create one through the Dashboard. 

You must provide a unique name for the SSH key, along with a public key. If you don't have a public key, see: [Create a public key](/).

<Note>
  Supported public key formats: 
    - ssh-rsa
    - ssh-dss (DSA)
    - ssh-ed25519
    - ecdsa keys with NIST curves
</Note>

Alternatively, you can create an SSH key by calling the [`POST /ssh_keys`](/api-reference/ssh-keys/create) endpoint:

<EndpointRequestSnippet endpoint="POST /ssh_keys" />

If your POST request is successful, the endpoint responds by echoing the `name` and `public_key` you sent.

```json title="JSON"
{
    "name": "mykey",
    "public_key": "<your_public_key>"
}
```

## List existing SSH keys

The following endpoint responds with a list of SSH keys:

<EndpointRequestSnippet endpoint="GET /ssh_keys" />

Each object in the list represents an SSH key, including its `name` and `public_key`. 

```json title="JSON"
[
    {
        "name": "mykey",
        "public_key": "<public_key>"
    },
    ...
]
```

## Create the instance 

Use the cURL command below to create a new endpoint. Replace `<ssh_key_name>` with the `name` of your SSH key. 

The example below is configured with a `"gpu_type"` of `"RTX_A6000_48GB"`, a `"gpu_count"` of `1`, and an `"operating_system_label"` of `"ubuntu_20_04_lts"`. 

To use a different configuration, view [the available configurations and operating systems](/list-of-available-configurations-and-operating-systems). 

```bash title="bash"
curl -X POST https://platform.fluidstack.io/instances \
     -H "api-key: <api_key>" \
     -H "Content-Type: application/json" \
    --d '{"name": "myinstance", "operating_system_label": "ubuntu_20_04_lts", "ssh_keys": ["<ssh_key_name>"], "gpu_type": "RTX_A6000_48GB", "gpu_count": 1}'
```

You will receive a response with an instance `id`. 

At first, the instance `status` will be `pending`. The `status` will change to `running` after the instance is created and available. 

```json title="json"
{
    "id": "<instance_id>",
    "status": "pending",
    "username": "<username>",
    "ssh_port": "<ssh_port>",
    "ssh_keys": [ ],
    "ip_address": "<ip_address>",
    "name": "<instance_name>",
    "term": "hourly",
    "current_rate": 0,
    "configuration": {},
    "region": {},
    "volumes": [ ],
    "operating_system": {},
    "created_at": "<created_at>"
}
```

## Access your instance 

When the instance is running, you can connect to it using SSH. Use the private key that corresponds to the public key you used when creating the SSH key for this instance.

```bash title="bash"
ssh -i <your_private_key> -p <ssh_port> <username>@<ip_address>
```
